{{ define "title" }}{{.Title}} // {{ .Site.Title }}{{ end }}

{{ define "main" }}
<article class="main">
  <h1 class="title">
    <small>{{ .Section | singularize | title }}</small>
    {{ .Title | markdownify }}
  </h1>
  {{ with or .Description .Params.brief }}
    <div class="dek">
    {{ . | markdownify }}
    </div>
  {{ end }}
  {{ with .Params.meta }}
    <div class="metas">
      {{ range . }}
        <div class="meta">
          <h4 class="meta_head">{{ .title }}</h4>
          {{ .body | markdownify }}
        </div>
      {{ end }}
    </div>
  {{ end }}
  <section class="content">
    {{ .Content }}
  </section>
</article>
<aside class="meta">
  <div>
    {{ with .Params.topics }}
    <ul class="topics">
      {{ range . }}
        <li>
          {{ with $.Site.GetPage (printf "/%s/%s.md" "topics" .) -}}
            <a href="{{ .Permalink }}">{{ .Title | markdownify }}</a>
          {{- end }}
        </li>
      {{ end }}
    </ul>
    {{ end }}
    {{ with .Params.tags }}
    <ul class="tags">
      {{ range . }}
      <li> <a href="{{ "tags" | absURL }}/{{ . | urlize }}">{{ . }}</a> </li>
      {{ end }}
    </ul>
    {{ end }}
  </div>
  <hr>
  <div style="display: flex; justify-content: space-between;">
    {{ with .PrevInSection }}
    <a class="previous" href="{{.Permalink}}">&larr; {{.Title | markdownify}}</a>
    {{ end }}
    {{ with .NextInSection }}
    <a class="next" href="{{.Permalink}}">{{.Title | markdownify}} &rarr;</a>
    {{ end }}
  </div>
</aside>
{{ end }}
